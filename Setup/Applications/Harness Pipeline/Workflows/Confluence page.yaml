harnessApiVersion: '1.0'
type: BUILD
notificationRules:
- conditions:
  - FAILED
  executionScope: WORKFLOW
  notificationGroupAsExpression: false
  userGroupAsExpression: false
  userGroupIds:
  - qt7LQdIMTqyDJMauq1jByg
phases:
- daemonSet: false
  name: Phase 1
  phaseSteps:
  - type: PREPARE_STEPS
    name: Prepare Steps
    steps:
    - type: HTTP
      name: Update Release page
      properties:
        assertion: ''
        body: |-
          {"type":"page","title":"New Release page",
          "space":{"key":"TEST"},"body":{"storage":{"value":"<at:declarations><at:string at:name=\"Release_version\" /><at:string at:name=\"JIRA_ISSUE\" /><at:string at:name=\"Approver\" /></at:declarations><ac:structured-macro ac:name=\"info\" ac:schema-version=\"1\" ac:macro-id=\"fe2cacde-afa3-486e-8ec9-d3d343399565\"><ac:rich-text-body><p>Release Information</p><p>State: <ac:structured-macro ac:name=\"status\" ac:schema-version=\"1\" ac:macro-id=\"2978535c-be13-47cb-abc2-871fece344b5\"><ac:parameter ac:name=\"title\">Completed</ac:parameter><ac:parameter ac:name=\"colour\">Green</ac:parameter></ac:structured-macro> </p><p>Date: <time datetime=\"2021-07-14\" /> </p><p>Version:  ${workflow.variables.Release_version}</p><p>Issues linked: <a style=\"text-decoration: underline;\" href=\"https://harnessdemo.atlassian.net/browse/${workflow.variables.JIRA_ISSUE}\">${workflow.variables.JIRA_ISSUE}</a></p><p>${workflow.variables.Approver}</p></ac:rich-text-body></ac:structured-macro><p />","representation":
          "storage"}},
          "version":{"number":16}}
        executeWithPreviousSteps: false
        headers:
        - key: Content-Type
          value: application/json
        - key: Authorization
          value: Basic dHJhcHRoeXNoZXR0eUBnbWFpbC5jb206Y3huSU5XUVBDUUNaT0VxV2JSMjJBNzAy
        method: PUT
        publishAsVar: false
        responseProcessingExpressions: ''
        sweepingOutputName: null
        sweepingOutputScope: null
        tags: null
        templateUuid: null
        templateVariables: null
        templateVersion: null
        timeoutMillis: 10000
        url: https://harnessdemo.atlassian.net/wiki/rest/api/content/46006306
        useProxy: false
    stepsInParallel: false
  - type: COLLECT_ARTIFACT
    name: Collect Artifact
    stepsInParallel: false
  - type: WRAP_UP
    name: Wrap Up
    stepsInParallel: false
  provisionNodes: false
  statefulSet: false
templatized: true
userVariables:
- type: TEXT
  fixed: false
  mandatory: false
  name: Page_version
  value: '15'
- type: TEXT
  fixed: false
  mandatory: false
  name: Release_version
  value: v1.1
- type: TEXT
  fixed: false
  mandatory: false
  name: Approver
  value: Trapthy
- type: TEXT
  fixed: false
  mandatory: false
  name: JIRA_ISSUE
  value: HAR-44
